<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<!--Navigator Fragment-->
<th:block th:fragment="navigator-admin"
          th:with="title=(${ title } ?: null)">
    <div class="loading-page"
         style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: white; z-index: 999; transition: opacity 0.5s, visibility 0.5s">
    </div>
    <nav class="navbar">
        <div class="navbar-brand clickable" onclick="location.href='/card'"></div>
        <div class="navbar-menu">
            <a class="nav-link clickable" id="nav-link-interview" onclick="interview()">인터뷰</a>
            <a class="nav-link clickable" id="nav-link-categorymanage" href="/card/management">카테고리 관리</a>
            <a class="nav-link clickable" id="nav-link-insert" onclick="insert()">카드 추가</a>
            <a class="nav-link clickable" id="nav-link-requestmanage" href="/card/requestmanage">요청 게시판</a>
            <a class="nav-link clickable" id="nav-link-sitemap" href="#"
               onmouseenter="showNavbarSitemapDropdown()" onmouseleave="hideNavbarSitemapDropdown()">사이트맵</a>
        </div>
        <div class="navbar-search-container">
            <div class="navbar-search">
                <div th:replace="fragment/selectbox::selectBoxFragment(selectBoxId='navbar-search-criteria',
                optionList=${ {{'카테고리', 'category'}, {'태그', 'tag'}, {'질문', 'question'}} },
                optionText=0,
                optionValue=1)"></div>
                <input type="text" id="navbar-search-keyword" onkeyup="searchEnterKey(event)"/>
                <button class="clickable" id="btn-navbar-search" onclick="search()"></button>
            </div>
            <form id="navbar-search-form" method="get" action="/card/list" style="display: none;">
                <input class="search-criteria" type="hidden" name="criteria">
                <input class="search-keyword" type="hidden" name="keyword">
                <input class="search-original" type="hidden" name="original">
            </form>
        </div>
        <div class="navbar-buttons">
            <button class="navbar-search-show clickable" onclick="navbarSearchShow(event)"></button>
            <button class="navbar-narrow-show clickable" onclick="narrowNavbarShow()"></button>
        </div>
    </nav>
    <div class="page-title" th:if="${ title }">
        <p th:text="${ title }"></p>
        <img class="navbar-login" height="40px" width="auto"
             th:src="@{/img/role_admin_image.png}">
        <div class="navbar-user-info">
            <a class="navbar-user-id">long long user id 님</a>
            <a class="navbar-logout clickable" onclick="logout()">로그아웃</a>
        </div>
    </div>
    <div class="navbar-dropdown-overlay"></div>
    <div class="navbar-dropdown-sitemap"
         onmouseenter="showNavbarSitemapDropdown()" onmouseleave="hideNavbarSitemapDropdown()">
        <p>Site Map</p>
        <div class="slick-slider-sitemap">
            <div class="btn-container-sitemap">
                <button id="btn-sitemap-pre" class="clickable" onclick="preItem()"></button>
            </div>
            <div class="container-sitemap-list">
                <ul class="sitemap-list">
                    <li class="sitemap-list-item">
                        <img class="sitemap-img clickable" src="/img/app_image_cardgame.png" onclick="location.href='/card'">
                    </li>
                </ul>
            </div>
            <div class="btn-container-sitemap">
                <button id="btn-sitemap-nxt" class="clickable" onclick="nxtItem()"></button>
            </div>
        </div>
    </div>
    <div th:replace="fragment/modal::modalFragment(modalId='modal-interview',
        title=~{::.modal-interview-title},
        content=~{::.modal-interview-content},
        buttons=~{::.modal-interview-buttons},
        closeButton=false,
        escClose=true,
        outClose=true)">
        <th:block class="modal-interview-title">
            <p>카테고리 선택</p>
        </th:block>
        <th:block class="modal-interview-content">
            <form th:method="get" th:action="@{/card/interview}" class="form-interview">
                <th:block th:each="categoryDto: ${ categoryDtoList }">
                    <input class="interview-category-checkbox"
                           th:id="${ #ids.seq('interview-category-checkbox-') }"
                           type="checkbox"
                           name="keyword"
                           th:value="${ categoryDto.id }">
                    <label class="interview-category-item clickable"
                           th:for="${ #ids.prev('interview-category-checkbox-') }">
                        <span class="interview-category-checkview"></span>
                        <p th:text="${ categoryDto.name }"></p>
                    </label>
                </th:block>
            </form>
        </th:block>
        <th:block class="modal-interview-buttons">
            <button id="interviewFormSubmit" onclick="interviewSubmit()">시작</button>
            <button id="interviewCancel" onclick="interviewCancel()">취소</button>
        </th:block>
    </div>
    <div th:replace="fragment/modal::modalFragment(modalId='modal-insert',
        title=~{::.modal-insert-title},
        content=~{::.modal-insert-content},
        buttons=~{::.modal-insert-buttons},
        closeButton=false,
        escClose=true)">
        <th:block class="modal-insert-title">
            <a id="modal-insert-title-text">카드 추가</a>
        </th:block>
        <th:block class="modal-insert-content">
            <form id="modal-insert-content-category">
                <div th:replace="fragment/selectbox::selectBoxFragment(selectBoxId='modal-insert-content-category-select',
                optionList=${ categoryDtoList },
                optionText='name',
                optionValue='id')"></div>
            </form>
            <a id="modal-insert-content-qtitle">Q.</a>
            <textarea maxlength="200" class="modal-insert-content-input"
                      id="modal-insert-content-question"></textarea>
            <a id="modal-insert-content-atitle">A.</a>
            <textarea onkeydown="if(event.keyCode===9){
                let v=this.value,s=this.selectionStart,e=this.selectionEnd;
                this.value=v.substring(0, s)+'\t'+v.substring(e);
                this.selectionStart=this.selectionEnd=s+1;
                return false;
            }" maxlength="800" class="modal-insert-content-input"
                      id="modal-insert-content-answer"></textarea>
            <a id="modal-insert-content-ttitle">T.</a>
            <textarea maxlength="210" class="modal-insert-content-input" id="modal-insert-content-tags"></textarea>
        </th:block>
        <th:block class="modal-insert-buttons">
            <button class="clickable modal-insert-buttons" type="button"
                    id="modal-insert-buttons-insert"
                    onclick="insertModalSubmit()">추가</button>
            <button class="clickable modal-insert-buttons" type="button"
                    id="modal-insert-buttons-close"
                    onclick="insertModalClose()">닫기</button>
        </th:block>
    </div>
    <div class="navbar-narrow-overlay" onclick="narrowNavbarHide()"></div>
    <div class="navbar-narrow">
        <div class="navbar-narrow-top">
            <img class="navbar-narrow-login" height="40px" width="auto"
                 th:src="@{/img/role_admin_image.png}">
            <div class="navbar-user-info">
                <a class="navbar-user-id">long long user id 님</a>
                <a class="navbar-logout clickable" onclick="logout()">로그아웃</a>
            </div>
            <button class="navbar-narrow-hide" onclick="narrowNavbarHide()"></button>
        </div>
        <div class="navbar-narrow-container">
            <div class="navbar-narrow-box">
                <ul class="list-narrow-link">
                    <li class="narrow-link clickable" onclick="interview()">
                        <div><span>인터뷰</span></div>
                    </li>
                    <li class="narrow-link clickable" onclick="location.href='/card/management'">
                        <div><span>카테고리 관리</span></div>
                    </li>
                    <li class="narrow-link clickable" onclick="insert()">
                        <div><span>카드 추가</span></div>
                    </li>
                    <li class="narrow-link clickable" onclick="location.href='/card/requestmanage'">
                        <div><span>요청 게시판</span></div>
                    </li>
                    <li class="narrow-link clickable" onclick="this.classList.toggle('narrow-link-open')">
                        <div><span>사이트맵</span><span class="drop-mark"></span></div>
                    </li>
                    <div class="narrow-link-sub">
                        <ul class="list-narrow-link">
                            <li class="narrow-link clickable" onclick="location.href='/card'">
                                <div><span>Card Study</span></div>
                            </li>
                        </ul>
                    </div>
                </ul>
            </div>
        </div>
    </div>
    <script th:inline="javascript">
        let categoryDtoList = [[${categoryDtoList}]];
    </script>
</th:block>
</html>