<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<!--Navigator Fragment-->
<th:block th:fragment="navigator"
          th:with="title=(${ title } ?: null)">
    <nav class="navbar">
        <div class="navbar-brand clickable" onclick="location.href='/card'"></div>
        <div class="navbar-menu">
            <a class="nav-link clickable" id="nav-link-interview" onclick="interview()">인터뷰</a>
            <a class="nav-link clickable" id="nav-link-categorymanage" href="/card/management">카테고리 관리</a>
            <a class="nav-link clickable" id="nav-link-insert" onclick="insert()">카드 추가</a>
            <a class="nav-link clickable" id="nav-link-sitemap" href="#"
               onmouseenter="showNavbarSitemapDropdown()" onmouseleave="hideNavbarSitemapDropdown()">사이트맵</a>
        </div>
        <div class="navbar-search-container">
            <div class="navbar-search">
                <select id="search-criteria">
                    <option value="category">
                        카테고리
                    </option>
                    <option value="tag">
                        태그
                    </option>
                    <option value="question">
                        질문
                    </option>
                </select>
                <input type="text" id="search-keyword" onkeyup="searchEnterKey(event)"/>
                <button class="clickable" id="btn-search" onclick="search()"></button>
            </div>
            <form id="searchForm" method="get" action="/card/list" style="display: none;">
                <input type="hidden" name="tag" id="tagKey">
                <input type="hidden" name="question" id="questionKey">
                <input type="hidden" name="cid" id="categoryKey">
                <input type="hidden" name="keystring" id="keystring">
            </form>
        </div>
        <div class="navbar-buttons">
            <button class="navbar-search-show clickable" onclick="navbarSearchShow(event)"></button>
            <button class="navbar-narrow-show clickable" onclick="narrowNavbarShow()"></button>
        </div>
    </nav>
    <div class="page-title" th:if="${ title }">
        <p th:text="${ title }"></p>
    </div>
    <div class="navbar-dropdown-overlay"></div>
    <div class="navbar-dropdown-sitemap"
         onmouseenter="showNavbarSitemapDropdown()" onmouseleave="hideNavbarSitemapDropdown()">
        <h1>Site Map</h1>
        <div class="slick-slider-sitemap">
            <div class="btn-container-sitemap">
                <button id="btn-sitemap-pre" class="clickable" onclick="preItem()"></button>
            </div>
            <div class="container-sitemap-list">
                <ul class="sitemap-list">
                    <li class="sitemap-list-item">
                        <img class="sitemap-img clickable" src="/img/app_image_cardgame.png" onclick="location.href='/card'">
                    </li>
                </ul>
            </div>
            <div class="btn-container-sitemap">
                <button id="btn-sitemap-nxt" class="clickable" onclick="nxtItem()"></button>
            </div>
        </div>
    </div>
    <div th:replace="fragment/modal::modalFragment(modalId='modal-interview',
        title=~{::.modal-interview-title},
        content=~{::.modal-interview-content},
        buttons=~{::.modal-interview-buttons},
        closeButton=false,
        escClose=true,
        outClose=true)">
        <th:block class="modal-interview-title">
            <h1 class="caution">카테고리 선택</h1>
        </th:block>
        <th:block class="modal-interview-content">
            <form th:method="get" th:action="@{/card/interview}" class="form-interview">
                <th:block th:each="categoryDto: ${ categoryDtoList }">
                    <input class="interview-category-checkbox"
                           th:id="${ #ids.seq('interview-category-checkbox-') }"
                           type="checkbox"
                           name="keyword"
                           th:value="${ categoryDto.cid }">
                    <label class="interview-category-item clickable"
                           th:for="${ #ids.prev('interview-category-checkbox-') }">
                        <span class="interview-category-checkview"></span>
                        <p th:text="${ categoryDto.cname }"></p>
                    </label>
                </th:block>
            </form>
        </th:block>
        <th:block class="modal-interview-buttons">
            <button id="interviewFormSubmit" onclick="interviewSubmit()">시작</button>
            <button id="interviewCancel" onclick="interviewCancel()">취소</button>
        </th:block>
    </div>
    <div th:replace="fragment/modal::modalFragment(modalId='modal-insert',
        title=~{::.modal-insert-title},
        content=~{::.modal-insert-content},
        buttons=~{::.modal-insert-buttons},
        closeButton=false,
        escClose=true,
        outClose=true)">
        <th:block class="modal-insert-title">
            <a id="modal-insert-title-text">카드 추가</a>
        </th:block>
        <th:block class="modal-insert-content">
            <form id="modal-insert-content-category">
                <select id="modal-insert-content-category-select">
                    <option value="none" selected disabled hidden>===선택===</option>
                    <option th:each="categoryDto : ${categoryDtoList}"
                            th:value="${categoryDto.cid}"
                            th:text="${categoryDto.cname}"></option>
                </select>
            </form>
            <a id="modal-insert-content-qtitle">Q.</a>
            <textarea maxlength="200" class="modal-insert-content-input"
                      id="modal-insert-content-question"></textarea>
            <a id="modal-insert-content-atitle">A.</a>
            <textarea maxlength="800" class="modal-insert-content-input"
                      id="modal-insert-content-answer"></textarea>
            <a id="modal-insert-content-ttitle">T.</a>
            <textarea maxlength="210" class="modal-insert-content-input"
                      id="modal-insert-content-tags"></textarea>
        </th:block>
        <th:block class="modal-insert-buttons">
            <button class="clickable modal-insert-buttons" type="button"
                    id="modal-insert-buttons-insert"
                    onclick="insertModalSubmit()">추가</button>
            <button class="clickable modal-insert-buttons" type="button"
                    id="modal-insert-buttons-close"
                    onclick="insertModalClose()">닫기</button>
        </th:block>
    </div>
    <div class="navbar-narrow-overlay" onclick="narrowNavbarHide()"></div>
    <div class="navbar-narrow">
        <div class="navbar-narrow-top">
            <button class="navbar-narrow-hide" onclick="narrowNavbarHide()"></button>
        </div>
        <div class="navbar-narrow-container">
            <div class="navbar-narrow-box">
                <ul class="list-narrow-link">
                    <li class="narrow-link clickable" onclick="interview()">
                        <div><span>인터뷰</span></div>
                    </li>
                    <li class="narrow-link clickable" onclick="location.href='/card/management'">
                        <div><span>카테고리 관리</span></div>
                    </li>
                    <li class="narrow-link clickable" onclick="insert()">
                        <div><span>카드 추가</span></div>
                    </li>
                    <li class="narrow-link clickable" onclick="this.classList.toggle('narrow-link-open')">
                        <div><span>사이트맵</span><span class="drop-mark"></span></div>
                    </li>
                    <div class="narrow-link-sub">
                        <ul class="list-narrow-link">
                            <li class="narrow-link clickable" onclick="location.href='/card'">
                                <div><span>Card Study</span></div>
                            </li>
                        </ul>
                    </div>
                </ul>
            </div>
        </div>
    </div>
    <script th:inline="javascript">
        let categoryDtoList = [[${categoryDtoList}]];
    </script>
</th:block>
</html>